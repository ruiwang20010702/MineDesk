# ğŸš€ MineDesk å¼€å‘è·¯çº¿å›¾ä¸è¡ŒåŠ¨è®¡åˆ’

> **é¡¹ç›®æ„¿æ™¯**ï¼šæ‰“é€ ä¸€ä¸ª Local-first + AI-native çš„ä¸ªäººçŸ¥è¯†æ“ä½œç³»ç»Ÿ  
> **å½“å‰çŠ¶æ€**ï¼šâœ… ç†è§£å±‚å°±ç»ªï¼ˆMineContext + RAGï¼‰| ğŸŸ¡ è®°å¿†å±‚å¾…å¯åŠ¨ | ğŸ”² äº¤äº’å±‚å¾…å¼€å‘

---

## ğŸ“Š æ•´ä½“è¿›åº¦æ¦‚è§ˆ

æ ¹æ® PRD v1.6 çš„ 30 å‘¨è·¯çº¿å›¾ï¼Œå½“å‰æ‰€å¤„ä½ç½®ï¼š

| é˜¶æ®µ | ç›®æ ‡ | çŠ¶æ€ | è¿›åº¦ |
|------|------|------|------|
| **M0** (1-2å‘¨) | æ¶æ„è®¾è®¡ä¸æ¥å£å®šä¹‰ | âœ… å·²å®Œæˆ | 100% |
| **M1** (3-5å‘¨) | macOS åŸå‹ + screenpipe é€šè·¯ | ğŸŸ¡ è¿›è¡Œä¸­ | 65% |
| **M2** (6-9å‘¨) | Graph + KB MVP | ğŸŸ¡ éƒ¨åˆ†å®Œæˆ | 40% |
| **M2.5** (9-10å‘¨) | SQLite-VSS å‡çº§ | ğŸ”² å¾…å¼€å§‹ | 0% |
| **M3** (10-13å‘¨) | éšç§ä¸­å¿ƒä¸æ··åˆåŒæ­¥ | ğŸ”² å¾…å¼€å§‹ | 0% |
| **M4** (14-17å‘¨) | weekly_report æ¨¡å— | ğŸ”² å¾…å¼€å§‹ | 0% |
| **M5** (18-21å‘¨) | MCP å¹³å°ï¼ˆNotion/GitHubï¼‰ | ğŸ”² å¾…å¼€å§‹ | 0% |
| **M6** (22-26å‘¨) | CrewAI åä½œ + Windows é€‚é… | ğŸ”² å¾…å¼€å§‹ | 0% |
| **M7** (27-30å‘¨) | iOS è½»é‡ç‰ˆ | ğŸ”² å¾…å¼€å§‹ | 0% |

**å½“å‰ä½ç½®**ï¼šM1 é˜¶æ®µåæœŸ â†’ M2 é˜¶æ®µæ—©æœŸ

---

## ğŸ¯ MineDesk æ¶æ„å…¨æ™¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MineDesk ç³»ç»Ÿæ¶æ„                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº¤äº’å±‚ï¼ˆUI Layerï¼‰   â”‚  â† å¿«æ·é”®ã€é€‰åŒºã€OCRã€å¯¹è¯
â”‚  - Everywhere        â”‚  
â”‚  - Electron å‰ç«¯     â”‚  ğŸ”² å¾…å¼€å‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®°å¿†å±‚ï¼ˆMemoryï¼‰     â”‚  â† æ¡Œé¢æ—¶é—´çº¿ã€æˆªå›¾ã€OCR
â”‚  - screenpipe        â”‚  ğŸŸ¡ å¾…å¯åŠ¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç†è§£å±‚ï¼ˆIntelligenceï¼‰â”‚  â† è¯­ä¹‰ç†è§£ã€RAGã€åµŒå…¥
â”‚  - MineContext       â”‚  âœ… å·²éƒ¨ç½²ï¼ˆSiliconFlowï¼‰
â”‚  - Vector Search     â”‚  âœ… å·²éªŒè¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŸ¥è¯†å±‚ï¼ˆKnowledgeï¼‰  â”‚  â† æœ¬åœ°å›¾è°±ã€çŸ¥è¯†åº“
â”‚  - Graph + KB        â”‚  ğŸŸ¡ éƒ¨åˆ†å®ç°ï¼ˆSQLiteï¼‰
â”‚  - NetworkX          â”‚  ğŸ”² å¾…é›†æˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰§è¡Œå±‚ï¼ˆExecutionï¼‰  â”‚  â† Agent å®¿ä¸»ã€å·¥ä½œæµ
â”‚  - AingDesk          â”‚  ğŸ”² å¾…é›†æˆ
â”‚  - CrewAI Layer      â”‚  ğŸ”² å¾…å®ç°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº§å‡ºå±‚ï¼ˆOutputï¼‰     â”‚  â† æŠ¥å‘Šã€å¯¼å‡ºã€MCP
â”‚  - weekly_report     â”‚  ğŸ”² å¾…å¼€å‘
â”‚  - MCP Platform      â”‚  ğŸ”² å¾…å¼€å‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¥ ç¬¬ä¸€é˜¶æ®µï¼šéªŒè¯ä¸å®Œå–„åŸºç¡€ï¼ˆæœ¬å‘¨ï¼Œ2-3 å¤©ï¼‰

### ç›®æ ‡
ç¡®ä¿ç°æœ‰ç³»ç»Ÿç¨³å®šè¿è¡Œï¼Œå»ºç«‹å®Œæ•´çš„"è®°å¿†â†’ç†è§£â†’æ£€ç´¢"é“¾è·¯ã€‚

### ä»»åŠ¡æ¸…å•

#### âœ… 1.1 å·²å®Œæˆçš„å·¥ä½œ
- [x] MineContext åç«¯éƒ¨ç½²ï¼ˆFastAPIï¼‰
- [x] SiliconFlow API é…ç½®ï¼ˆQwen2.5-7B + BGE-Large-zhï¼‰
- [x] åŸºç¡€ RAG åŠŸèƒ½éªŒè¯
- [x] å¯¼å…¥ MineDesk PRD æ–‡æ¡£
- [x] å‘é‡æ£€ç´¢æµ‹è¯•ï¼ˆ< 2ç§’å“åº”ï¼Œç›¸å…³åº¦ 0.7+ï¼‰

#### ğŸ”² 1.2 å¯åŠ¨ Screenpipeï¼ˆè®°å¿†å±‚ï¼‰â­â­â­

**ä¸ºä»€ä¹ˆé‡è¦**ï¼šè¿™æ˜¯ MineDesk çš„æ ¸å¿ƒå·®å¼‚åŒ–åŠŸèƒ½ - è‡ªåŠ¨æ•è·å·¥ä½œä¸Šä¸‹æ–‡

**å…·ä½“æ­¥éª¤**ï¼š
```bash
cd "/Users/ruiwang/Desktop/killer app/screenpipe-main"

# æ£€æŸ¥æ˜¯å¦å·²ç¼–è¯‘
ls -la target/release/screenpipe

# å¦‚æœæœªç¼–è¯‘ï¼Œæ‰§è¡Œç¼–è¯‘ï¼ˆéœ€è¦ 15-20 åˆ†é’Ÿï¼‰
cargo build --release

# å¯åŠ¨ Screenpipe
./target/release/screenpipe --data-dir ~/.screenpipe
```

**é…ç½®è¦ç‚¹**ï¼š
1. **æˆäºˆæƒé™**ï¼ˆmacOS ç³»ç»Ÿåå¥½è®¾ç½®ï¼‰ï¼š
   - å±å¹•å½•åˆ¶æƒé™
   - è¾…åŠ©åŠŸèƒ½è®¿é—®ï¼ˆå¯é€‰ï¼‰
   - éº¦å…‹é£æƒé™ï¼ˆå¯é€‰ï¼‰

2. **éšç§é…ç½®**ï¼š
   ```bash
   # é…ç½®çº¢åŒºé®ç½©ï¼ˆé¿å…æ•è·æ•æ„Ÿä¿¡æ¯ï¼‰
   # ç¼–è¾‘ ~/.screenpipe/config.toml
   [privacy]
   excluded_apps = ["1Password", "Keychain Access"]
   excluded_windows = [".*password.*", ".*secret.*"]
   ```

3. **éªŒè¯æ•°æ®é‡‡é›†**ï¼š
   ```bash
   # ç­‰å¾… 5-10 åˆ†é’Ÿåæ£€æŸ¥æ•°æ®
   sqlite3 ~/.screenpipe/db.sqlite "
     SELECT COUNT(*) as total_frames FROM frames;
     SELECT COUNT(*) as total_ocr FROM ocr_text;
     SELECT app_name, COUNT(*) as count 
     FROM frames 
     GROUP BY app_name 
     ORDER BY count DESC 
     LIMIT 10;
   "
   ```

**é¢„æœŸç»“æœ**ï¼š
- æ¯åˆ†é’Ÿæ•è· 1-2 ä¸ªå±å¹•å¿«ç…§
- OCR æ–‡æœ¬è¯†åˆ«æˆåŠŸç‡ > 80%
- CPU å ç”¨ < 15%
- ç£ç›˜å¢é•¿ < 100MB/å°æ—¶

---

#### ğŸ”² 1.3 è¿æ¥ Screenpipe åˆ° MineContext â­â­â­

**ç›®æ ‡**ï¼šå°† Screenpipe é‡‡é›†çš„æ•°æ®è‡ªåŠ¨æ‘„å…¥ MineContextï¼Œå®ç°è¯­ä¹‰æ£€ç´¢

**å®ç°æ–¹æ¡ˆ**ï¼šåˆ›å»ºåŒæ­¥è„šæœ¬

```python
# åˆ›å»ºæ–‡ä»¶ï¼šscreenpipe_sync.py
#!/usr/bin/env python3
"""
Screenpipe â†’ MineContext åŒæ­¥è„šæœ¬
æ¯å°æ—¶è‡ªåŠ¨åŒæ­¥ä¸€æ¬¡æ¡Œé¢æ´»åŠ¨æ•°æ®
"""

import sqlite3
import requests
from datetime import datetime, timedelta
import time
import json

SCREENPIPE_DB = "/Users/ruiwang/.screenpipe/db.sqlite"
MINECONTEXT_API = "http://127.0.0.1:17860"
SYNC_INTERVAL = 3600  # 1å°æ—¶

def fetch_recent_activities(hours=1):
    """ä» Screenpipe è·å–æœ€è¿‘çš„æ´»åŠ¨"""
    conn = sqlite3.connect(SCREENPIPE_DB)
    cursor = conn.cursor()
    
    since = datetime.now() - timedelta(hours=hours)
    since_ts = since.strftime("%Y-%m-%d %H:%M:%S")
    
    query = """
    SELECT 
        f.timestamp,
        f.app_name,
        f.window_name,
        o.text as ocr_text
    FROM frames f
    LEFT JOIN ocr_text o ON f.id = o.frame_id
    WHERE f.timestamp > ?
    ORDER BY f.timestamp DESC
    """
    
    cursor.execute(query, (since_ts,))
    activities = cursor.fetchall()
    conn.close()
    
    return activities

def group_activities_by_context(activities):
    """å°†æ´»åŠ¨æŒ‰ä¸Šä¸‹æ–‡åˆ†ç»„ï¼ˆåŒä¸€åº”ç”¨+çª—å£ï¼‰"""
    contexts = {}
    
    for timestamp, app, window, ocr_text in activities:
        key = f"{app}::{window}"
        
        if key not in contexts:
            contexts[key] = {
                "app": app,
                "window": window,
                "ocr_texts": [],
                "start_time": timestamp,
                "end_time": timestamp
            }
        
        contexts[key]["ocr_texts"].append(ocr_text)
        contexts[key]["end_time"] = timestamp
    
    return list(contexts.values())

def ingest_to_minecontext(contexts):
    """å°†ä¸Šä¸‹æ–‡æ‘„å…¥ MineContext"""
    for ctx in contexts:
        # åˆå¹¶ OCR æ–‡æœ¬
        content = "\n".join(filter(None, ctx["ocr_texts"]))
        
        if not content.strip():
            continue  # è·³è¿‡ç©ºå†…å®¹
        
        doc = {
            "documentId": f"screenpipe_{ctx['start_time']}",
            "source": "screenpipe",
            "mimeType": "text/plain",
            "title": f"{ctx['app']} - {ctx['window']}",
            "createdAt": ctx["start_time"],
            "content": content,
            "metadata": {
                "app": ctx["app"],
                "window": ctx["window"],
                "duration": ctx["end_time"] - ctx["start_time"],
                "type": "screen_capture"
            }
        }
        
        try:
            response = requests.post(
                f"{MINECONTEXT_API}/api/ingest/document/write",
                json=doc,
                timeout=30
            )
            
            if response.status_code == 200:
                print(f"âœ… Synced: {ctx['app']} - {ctx['window']}")
            else:
                print(f"âŒ Failed: {response.status_code} - {response.text}")
        
        except Exception as e:
            print(f"âŒ Error: {e}")

def main():
    """ä¸»å¾ªç¯ï¼šæ¯å°æ—¶åŒæ­¥ä¸€æ¬¡"""
    print(f"ğŸš€ Screenpipe â†’ MineContext åŒæ­¥æœåŠ¡å·²å¯åŠ¨")
    print(f"ğŸ“Š åŒæ­¥é—´éš”: {SYNC_INTERVAL}ç§’ ({SYNC_INTERVAL/3600}å°æ—¶)")
    print(f"ğŸ“‚ Screenpipe DB: {SCREENPIPE_DB}")
    print(f"ğŸ”— MineContext API: {MINECONTEXT_API}")
    print("-" * 60)
    
    while True:
        try:
            print(f"\nâ° [{datetime.now().strftime('%Y-%m-%d %H:%M:%S')}] å¼€å§‹åŒæ­¥...")
            
            # è·å–æ´»åŠ¨
            activities = fetch_recent_activities(hours=1)
            print(f"ğŸ“¥ è·å–åˆ° {len(activities)} æ¡æ´»åŠ¨è®°å½•")
            
            # åˆ†ç»„
            contexts = group_activities_by_context(activities)
            print(f"ğŸ”„ åˆ†ç»„ä¸º {len(contexts)} ä¸ªä¸Šä¸‹æ–‡")
            
            # æ‘„å…¥
            ingest_to_minecontext(contexts)
            
            print(f"âœ… åŒæ­¥å®Œæˆï¼ä¸‹æ¬¡åŒæ­¥: {(datetime.now() + timedelta(seconds=SYNC_INTERVAL)).strftime('%H:%M:%S')}")
            
        except Exception as e:
            print(f"âŒ åŒæ­¥å‡ºé”™: {e}")
        
        # ç­‰å¾…ä¸‹ä¸€æ¬¡åŒæ­¥
        time.sleep(SYNC_INTERVAL)

if __name__ == "__main__":
    main()
```

**å¯åŠ¨åŒæ­¥æœåŠ¡**ï¼š
```bash
cd "/Users/ruiwang/Desktop/killer app"

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x screenpipe_sync.py

# åå°è¿è¡Œï¼ˆå»ºè®®ä½¿ç”¨ tmux æˆ– screenï¼‰
nohup python3 screenpipe_sync.py > screenpipe_sync.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f screenpipe_sync.log
```

---

#### ğŸ”² 1.4 éªŒè¯å®Œæ•´é“¾è·¯ â­â­

**æµ‹è¯•åœºæ™¯**ï¼š
```bash
# 1. ç­‰å¾… Screenpipe è¿è¡Œ 10 åˆ†é’Ÿ
# 2. åœ¨æ­¤æœŸé—´æ­£å¸¸ä½¿ç”¨ç”µè„‘ï¼ˆæµè§ˆç½‘é¡µã€ç¼–è¾‘æ–‡æ¡£ç­‰ï¼‰
# 3. è§¦å‘åŒæ­¥
# 4. æµ‹è¯•æ£€ç´¢

curl -X POST http://127.0.0.1:17860/api/agent/chat \
  -H "Content-Type: application/json" \
  -d '{
    "query": "æˆ‘æœ€è¿‘åœ¨åšä»€ä¹ˆå·¥ä½œï¼Ÿ",
    "sessionId": "test-screenpipe-001"
  }'
```

**é¢„æœŸç»“æœ**ï¼š
- MineContext èƒ½å¤Ÿæ£€ç´¢åˆ°æ‚¨çš„æ¡Œé¢æ´»åŠ¨
- å›ç­”ä¸­åŒ…å«æœ€è¿‘ä½¿ç”¨çš„åº”ç”¨ã€æŸ¥çœ‹çš„æ–‡æ¡£ç­‰
- å“åº”å‡†ç¡®ä¸”ä¸Šä¸‹æ–‡ç›¸å…³

---

## ğŸ¨ ç¬¬äºŒé˜¶æ®µï¼šå‰ç«¯å¼€å‘ï¼ˆ2-4 å‘¨ï¼‰

### ç›®æ ‡
å¼€å‘ Electron æ¡Œé¢åº”ç”¨ï¼Œæä¾›ä¼˜é›…çš„ç”¨æˆ·ç•Œé¢ã€‚

### ä»»åŠ¡æ¸…å•

#### ğŸ”² 2.1 å‰ç«¯æ¶æ„é€‰æ‹© â­â­â­

**æ–¹æ¡ˆ Aï¼šåŸºäº MineContext ç°æœ‰å‰ç«¯**ï¼ˆæ¨èï¼‰

ä¼˜ç‚¹ï¼š
- âœ… å·²æœ‰å®Œæ•´çš„ Electron + React + TypeScript æ¶æ„
- âœ… å·²é›†æˆæˆªå›¾ã€OCRã€å¿«æ·é”®åŠŸèƒ½
- âœ… å·²æœ‰ MineContext API æ¥å£
- âœ… å¼€å‘å‘¨æœŸçŸ­ï¼ˆ2-3 å‘¨ï¼‰

ç¼ºç‚¹ï¼š
- âŒ UI éœ€è¦å¤§å¹…å®šåˆ¶
- âŒ å¯èƒ½å­˜åœ¨ä¸éœ€è¦çš„åŠŸèƒ½

**æ–¹æ¡ˆ Bï¼šä»é›¶å¼€å‘æ–°å‰ç«¯**

ä¼˜ç‚¹ï¼š
- âœ… å®Œå…¨æŒ‰ç…§ PRD è®¾è®¡
- âœ… ä»£ç å¹²å‡€ï¼Œæ˜“ç»´æŠ¤
- âœ… æ›´ç¬¦åˆ MineDesk æ„¿æ™¯

ç¼ºç‚¹ï¼š
- âŒ å¼€å‘å‘¨æœŸé•¿ï¼ˆ4-6 å‘¨ï¼‰
- âŒ éœ€è¦é‡æ–°å®ç°åŸºç¡€åŠŸèƒ½

**æ¨èå†³ç­–**ï¼šé€‰æ‹©æ–¹æ¡ˆ Aï¼Œç†ç”±å¦‚ä¸‹ï¼š
1. å¿«é€Ÿè¿­ä»£ï¼Œå°½æ—©éªŒè¯äº§å“ä»·å€¼
2. å¯ä»¥è¾¹ä½¿ç”¨è¾¹ä¼˜åŒ–
3. èŠ‚çœ 50% ä»¥ä¸Šå¼€å‘æ—¶é—´

---

#### ğŸ”² 2.2 å¯åŠ¨å‰ç«¯å¼€å‘ â­â­â­

```bash
cd "/Users/ruiwang/Desktop/killer app/MineContext-main/frontend"

# æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆéœ€è¦ 18+ï¼‰
node --version

# å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨ pnpmï¼‰
pnpm install

# å¯åŠ¨å¼€å‘æ¨¡å¼
pnpm dev

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼Œç¡®ä¿åç«¯è¿è¡Œ
cd "/Users/ruiwang/Desktop/killer app"
./start_minecontext.sh
```

---

#### ğŸ”² 2.3 æ ¸å¿ƒåŠŸèƒ½å®ç°

**ä¼˜å…ˆçº§ P0ï¼ˆå¿…é¡»ï¼‰**ï¼š

1. **å…¨å±€å¿«æ·é”®å”¤èµ·**ï¼ˆCmd+Shift+Spaceï¼‰
   - æ–‡ä»¶ï¼š`frontend/src/main/shortcuts.ts`
   - å®ç°ï¼šæ³¨å†Œå…¨å±€å¿«æ·é”®ï¼Œå”¤èµ·ä¸»çª—å£

2. **æ™ºèƒ½å¯¹è¯ç•Œé¢**
   - æ–‡ä»¶ï¼š`frontend/src/renderer/components/Chat.tsx`
   - åŠŸèƒ½ï¼šè¿æ¥ MineContext APIï¼Œæµå¼å“åº”

3. **ä¸Šä¸‹æ–‡å±•ç¤º**
   - æ˜¾ç¤ºæ£€ç´¢åˆ°çš„æ–‡æ¡£ç‰‡æ®µ
   - é«˜äº®ç›¸å…³å†…å®¹
   - æ¥æºè¿½æº¯

4. **è®¾ç½®é¢æ¿**
   - LLM é…ç½®ï¼ˆAPI Keyã€æ¨¡å‹é€‰æ‹©ï¼‰
   - éšç§è®¾ç½®ï¼ˆçº¢åŒºé®ç½©ã€æ•°æ®ä¿ç•™ï¼‰
   - åŒæ­¥è®¾ç½®

**ä¼˜å…ˆçº§ P1ï¼ˆé‡è¦ï¼‰**ï¼š

5. **æˆªå›¾ OCR**ï¼ˆå·²æœ‰åŸºç¡€ï¼‰
   - ä¼˜åŒ–é€‰åŒºè¯†åˆ«
   - æå‡ OCR å‡†ç¡®ç‡

6. **ä¼šè¯ç®¡ç†**
   - ä¿å­˜å†å²å¯¹è¯
   - æŒ‰ä¸»é¢˜åˆ†ç±»

7. **èœå•æ æ‚¬æµ®çª—**
   - å¿«é€Ÿè®¿é—®
   - çŠ¶æ€æ˜¾ç¤º

---

#### ğŸ”² 2.4 UI/UX ä¼˜åŒ–

å‚è€ƒä¼˜ç§€äº§å“çš„è®¾è®¡ï¼š
- **Raycast**ï¼šå¿«æ·é”®å”¤èµ·ã€å‘½ä»¤é¢æ¿
- **Notion**ï¼šçŸ¥è¯†åº“ç•Œé¢ã€æœç´¢ä½“éªŒ
- **Arc Browser**ï¼šä¾§è¾¹æ ã€ç©ºé—´ç®¡ç†

**è®¾è®¡è¦ç‚¹**ï¼š
- ç®€æ´ã€é«˜æ•ˆã€å¿«é€Ÿå“åº”
- é”®ç›˜ä¼˜å…ˆï¼ˆæ”¯æŒå…¨é”®ç›˜æ“ä½œï¼‰
- æ·±è‰²æ¨¡å¼ + æµ…è‰²æ¨¡å¼
- åŠ¨ç”»æµç•…ï¼Œæ€§èƒ½ä¼˜å…ˆ

---

## ğŸ¤– ç¬¬ä¸‰é˜¶æ®µï¼šCrewAI é›†æˆï¼ˆ3-5 å‘¨ï¼‰

### ç›®æ ‡
å®ç°å¤šæ™ºèƒ½ä½“åä½œï¼Œè‡ªåŠ¨ç”Ÿæˆå‘¨æŠ¥ã€‚

### ä»»åŠ¡æ¸…å•

#### ğŸ”² 3.1 å®‰è£… CrewAI

```bash
cd "/Users/ruiwang/Desktop/killer app"

# åˆ›å»º CrewAI é¡¹ç›®ç›®å½•
mkdir -p crewai_agents

# å®‰è£…ä¾èµ–
/opt/homebrew/bin/python3.11 -m pip install crewai crewai-tools
```

---

#### ğŸ”² 3.2 å®ç° Weekly Report Crew â­â­â­

æ ¹æ® PRD è®¾è®¡ï¼Œå®ç° 5 ä¸ª Agentï¼š

```python
# crewai_agents/weekly_report.py
from crewai import Agent, Task, Crew, Process
from crewai_tools import tool
import requests
from datetime import datetime, timedelta

# ============ Tools ============

@tool("search_context")
def search_context(query: str, days: int = 7) -> str:
    """ä» MineContext æ£€ç´¢æœ€è¿‘çš„ä¸Šä¸‹æ–‡"""
    since = (datetime.now() - timedelta(days=days)).isoformat()
    
    response = requests.post(
        "http://127.0.0.1:17860/api/search/vector",
        json={
            "query": query,
            "top_k": 20,
            "filters": {"since": since}
        }
    )
    
    results = response.json()
    return "\n\n".join([r["content"] for r in results.get("results", [])])

@tool("get_activities")
def get_activities(days: int = 7) -> str:
    """è·å–æœ€è¿‘çš„æ¡Œé¢æ´»åŠ¨ç»Ÿè®¡"""
    # ä» Screenpipe æ•°æ®åº“æŸ¥è¯¢
    import sqlite3
    conn = sqlite3.connect("/Users/ruiwang/.screenpipe/db.sqlite")
    cursor = conn.cursor()
    
    since = datetime.now() - timedelta(days=days)
    
    query = """
    SELECT app_name, COUNT(*) as count, SUM(duration) as total_time
    FROM frames
    WHERE timestamp > ?
    GROUP BY app_name
    ORDER BY count DESC
    LIMIT 20
    """
    
    cursor.execute(query, (since.strftime("%Y-%m-%d %H:%M:%S"),))
    activities = cursor.fetchall()
    conn.close()
    
    return "\n".join([f"- {app}: {count} æ¬¡ï¼Œå…± {total_time:.1f} åˆ†é’Ÿ" 
                      for app, count, total_time in activities])

# ============ Agents ============

researcher = Agent(
    role='Context Researcher',
    goal='Retrieve all relevant activities and context from the past week',
    backstory='''You are an expert at finding and organizing information.
    You have access to the user's desktop activities, documents, and conversations.
    Your job is to gather all relevant facts and events.''',
    tools=[search_context, get_activities],
    verbose=True
)

analyst = Agent(
    role='Data Analyst',
    goal='Extract key metrics, insights, and achievements',
    backstory='''You are skilled at analyzing data and identifying patterns.
    You can spot important trends, accomplishments, and areas for improvement.
    You focus on quantifiable results and meaningful insights.''',
    verbose=True
)

writer = Agent(
    role='Report Writer',
    goal='Generate a clear, well-structured weekly report in Markdown',
    backstory='''You are an experienced technical writer.
    You write clear, concise, and engaging reports.
    Your reports are well-structured with sections, bullet points, and highlights.''',
    verbose=True
)

reviewer = Agent(
    role='Quality Reviewer',
    goal='Review the report for clarity, accuracy, and style consistency',
    backstory='''You are a meticulous editor with an eye for detail.
    You ensure the report is professional, accurate, and easy to read.
    You fix grammar, improve flow, and ensure consistency.''',
    verbose=True
)

exporter = Agent(
    role='Export Specialist',
    goal='Format and export the report to multiple formats',
    backstory='''You are an expert at document formatting and export.
    You can convert reports to PDF, Markdown, HTML, and push to external systems.''',
    verbose=True
)

# ============ Tasks ============

research_task = Task(
    description='''Gather all activities and context from the past week.
    
    Focus on:
    1. Desktop activities (apps used, time spent)
    2. Documents created or edited
    3. Meetings and conversations
    4. Code commits and reviews
    5. Any significant events or achievements
    
    Use the search_context and get_activities tools.
    Organize the information by date and category.''',
    agent=researcher,
    expected_output='A comprehensive list of activities organized by date and category'
)

analysis_task = Task(
    description='''Analyze the gathered activities and extract insights.
    
    Calculate:
    1. Total productive time
    2. Time distribution by project/activity
    3. Key accomplishments
    4. Blockers or challenges
    5. Trends compared to previous weeks
    
    Provide quantifiable metrics where possible.''',
    agent=analyst,
    expected_output='A structured analysis with metrics and insights'
)

writing_task = Task(
    description='''Write a weekly report in Markdown format.
    
    Structure:
    # Weekly Report: [Date Range]
    
    ## ğŸ“Š Summary
    - Brief overview (2-3 sentences)
    
    ## ğŸ¯ Key Achievements
    - Bullet points of main accomplishments
    
    ## â±ï¸ Time Distribution
    - Table or list of time spent by project
    
    ## ğŸ“ˆ Metrics
    - Quantifiable results
    
    ## ğŸš§ Challenges & Blockers
    - Issues encountered
    
    ## ğŸ“… Next Week
    - Planned activities
    
    Use clear language, bullet points, and emoji for readability.''',
    agent=writer,
    expected_output='A complete weekly report in Markdown format'
)

review_task = Task(
    description='''Review the report for quality.
    
    Check:
    1. Grammar and spelling
    2. Clarity and flow
    3. Consistency in style and tone
    4. Accuracy of facts and numbers
    5. Proper formatting
    
    Make corrections and improvements as needed.''',
    agent=reviewer,
    expected_output='A polished, publication-ready report'
)

export_task = Task(
    description='''Export the report to multiple formats.
    
    1. Save Markdown to file
    2. Generate PDF (optional)
    3. Push to Notion (if configured)
    4. Send summary email (if configured)
    
    Return the file paths and URLs.''',
    agent=exporter,
    expected_output='Export confirmation with file paths and URLs'
)

# ============ Crew ============

weekly_report_crew = Crew(
    agents=[researcher, analyst, writer, reviewer, exporter],
    tasks=[research_task, analysis_task, writing_task, review_task, export_task],
    process=Process.sequential,
    verbose=True
)

# ============ Main ============

def generate_weekly_report():
    """ç”Ÿæˆå‘¨æŠ¥"""
    print("ğŸš€ å¼€å§‹ç”Ÿæˆå‘¨æŠ¥...")
    print("-" * 60)
    
    result = weekly_report_crew.kickoff()
    
    print("\n" + "=" * 60)
    print("âœ… å‘¨æŠ¥ç”Ÿæˆå®Œæˆï¼")
    print("=" * 60)
    print(result)
    
    return result

if __name__ == "__main__":
    generate_weekly_report()
```

**è¿è¡Œå‘¨æŠ¥ç”Ÿæˆ**ï¼š
```bash
cd "/Users/ruiwang/Desktop/killer app"
python3 crewai_agents/weekly_report.py
```

---

#### ğŸ”² 3.3 ä¼˜åŒ– Agent é…ç½®

**LLM é…ç½®**ï¼š
```python
# ä¸ºæ¯ä¸ª Agent é…ç½®ä¸åŒçš„æ¨¡å‹
researcher.llm = ChatOpenAI(
    base_url="https://api.siliconflow.cn/v1",
    api_key="sk-your-key",
    model="Qwen/Qwen2.5-7B-Instruct",
    temperature=0.3  # è¾ƒä½æ¸©åº¦ï¼Œç¡®ä¿å‡†ç¡®æ€§
)

writer.llm = ChatOpenAI(
    base_url="https://api.siliconflow.cn/v1",
    api_key="sk-your-key",
    model="Qwen/Qwen2.5-7B-Instruct",
    temperature=0.7  # è¾ƒé«˜æ¸©åº¦ï¼Œæå‡åˆ›é€ æ€§
)
```

---

## ğŸ”— ç¬¬å››é˜¶æ®µï¼šMCP å¹³å°é›†æˆï¼ˆ4-7 å‘¨ï¼‰

### ç›®æ ‡
è¿æ¥å¤–éƒ¨ç³»ç»Ÿï¼ˆNotionã€GitHubã€Jiraï¼‰ï¼Œå®ç°æ•°æ®äº’é€šã€‚

### ä»»åŠ¡æ¸…å•

#### ğŸ”² 4.1 MCP é€‚é…å™¨æ¶æ„

```python
# mcp_platform/base_adapter.py
from abc import ABC, abstractmethod
from typing import Dict, List, Any

class MCPAdapter(ABC):
    """MCP é€‚é…å™¨åŸºç±»"""
    
    @abstractmethod
    def connect(self, credentials: Dict[str, str]) -> bool:
        """è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿ"""
        pass
    
    @abstractmethod
    def sync_from_external(self) -> List[Dict[str, Any]]:
        """ä»å¤–éƒ¨ç³»ç»ŸåŒæ­¥æ•°æ®"""
        pass
    
    @abstractmethod
    def sync_to_external(self, data: Dict[str, Any]) -> bool:
        """æ¨é€æ•°æ®åˆ°å¤–éƒ¨ç³»ç»Ÿ"""
        pass
    
    @abstractmethod
    def get_resources(self) -> List[Dict[str, Any]]:
        """è·å–å¯ç”¨èµ„æºåˆ—è¡¨"""
        pass
```

---

#### ğŸ”² 4.2 Notion é€‚é…å™¨ â­â­â­

```python
# mcp_platform/notion_adapter.py
from notion_client import Client
from .base_adapter import MCPAdapter

class NotionAdapter(MCPAdapter):
    def __init__(self):
        self.client = None
    
    def connect(self, credentials: Dict[str, str]) -> bool:
        """è¿æ¥ Notion"""
        try:
            self.client = Client(auth=credentials["api_key"])
            # æµ‹è¯•è¿æ¥
            self.client.users.me()
            return True
        except Exception as e:
            print(f"Notion è¿æ¥å¤±è´¥: {e}")
            return False
    
    def sync_from_external(self) -> List[Dict[str, Any]]:
        """ä» Notion åŒæ­¥é¡µé¢"""
        pages = []
        
        # æœç´¢æ‰€æœ‰é¡µé¢
        results = self.client.search(filter={"property": "object", "value": "page"})
        
        for page in results.get("results", []):
            page_id = page["id"]
            
            # è·å–é¡µé¢å†…å®¹
            blocks = self.client.blocks.children.list(block_id=page_id)
            content = self._extract_content(blocks)
            
            pages.append({
                "id": page_id,
                "title": page["properties"].get("title", {}).get("title", [{}])[0].get("plain_text", "Untitled"),
                "content": content,
                "url": page["url"],
                "created_time": page["created_time"],
                "last_edited_time": page["last_edited_time"]
            })
        
        return pages
    
    def sync_to_external(self, data: Dict[str, Any]) -> bool:
        """åˆ›å»º Notion é¡µé¢"""
        try:
            parent_id = data.get("parent_database_id")
            
            page = self.client.pages.create(
                parent={"database_id": parent_id},
                properties={
                    "Name": {"title": [{"text": {"content": data["title"]}}]}
                },
                children=self._content_to_blocks(data["content"])
            )
            
            return True
        except Exception as e:
            print(f"åˆ›å»º Notion é¡µé¢å¤±è´¥: {e}")
            return False
    
    def _extract_content(self, blocks) -> str:
        """ä» Notion blocks æå–æ–‡æœ¬"""
        content = []
        for block in blocks.get("results", []):
            block_type = block["type"]
            if block_type in ["paragraph", "heading_1", "heading_2", "heading_3"]:
                rich_text = block[block_type].get("rich_text", [])
                text = "".join([t["plain_text"] for t in rich_text])
                content.append(text)
        return "\n\n".join(content)
    
    def _content_to_blocks(self, content: str) -> List[Dict]:
        """å°†æ–‡æœ¬è½¬æ¢ä¸º Notion blocks"""
        paragraphs = content.split("\n\n")
        blocks = []
        
        for para in paragraphs:
            blocks.append({
                "object": "block",
                "type": "paragraph",
                "paragraph": {
                    "rich_text": [{"type": "text", "text": {"content": para}}]
                }
            })
        
        return blocks
```

---

#### ğŸ”² 4.3 GitHub é€‚é…å™¨ â­â­

```python
# mcp_platform/github_adapter.py
from github import Github
from .base_adapter import MCPAdapter

class GitHubAdapter(MCPAdapter):
    def __init__(self):
        self.client = None
    
    def connect(self, credentials: Dict[str, str]) -> bool:
        """è¿æ¥ GitHub"""
        try:
            self.client = Github(credentials["access_token"])
            # æµ‹è¯•è¿æ¥
            self.client.get_user().login
            return True
        except Exception as e:
            print(f"GitHub è¿æ¥å¤±è´¥: {e}")
            return False
    
    def sync_from_external(self) -> List[Dict[str, Any]]:
        """åŒæ­¥ Issues å’Œ PRs"""
        items = []
        user = self.client.get_user()
        
        # è·å–æ‰€æœ‰ä»“åº“
        for repo in user.get_repos():
            # Issues
            for issue in repo.get_issues(state="all"):
                items.append({
                    "type": "issue",
                    "repo": repo.full_name,
                    "number": issue.number,
                    "title": issue.title,
                    "body": issue.body,
                    "state": issue.state,
                    "url": issue.html_url,
                    "created_at": issue.created_at.isoformat()
                })
            
            # Pull Requests
            for pr in repo.get_pulls(state="all"):
                items.append({
                    "type": "pull_request",
                    "repo": repo.full_name,
                    "number": pr.number,
                    "title": pr.title,
                    "body": pr.body,
                    "state": pr.state,
                    "url": pr.html_url,
                    "created_at": pr.created_at.isoformat()
                })
        
        return items
```

---

## ğŸ¯ å½“å‰æœ€ç´§æ€¥çš„ 3 ä¸ªä»»åŠ¡ï¼ˆæœ¬å‘¨å¿…åšï¼‰

### 1ï¸âƒ£ å¯åŠ¨ Screenpipeï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰â­â­â­

**ä¸ºä»€ä¹ˆ**ï¼šè¿™æ˜¯ MineDesk çš„æ ¸å¿ƒåŠŸèƒ½ - "è®°å¿†å±‚"

**æ€ä¹ˆåš**ï¼š
```bash
cd "/Users/ruiwang/Desktop/killer app/screenpipe-main"
cargo build --release
./target/release/screenpipe
```

**éªŒè¯**ï¼šè¿è¡Œ 10 åˆ†é’Ÿåï¼Œæ£€æŸ¥æ•°æ®åº“æœ‰æ•°æ®

---

### 2ï¸âƒ£ å®ç° Screenpipe â†’ MineContext åŒæ­¥ â­â­â­

**ä¸ºä»€ä¹ˆ**ï¼šæ‰“é€š"è®°å¿†â†’ç†è§£"é“¾è·¯

**æ€ä¹ˆåš**ï¼šè¿è¡Œä¸Šé¢æä¾›çš„ `screenpipe_sync.py` è„šæœ¬

**éªŒè¯**ï¼šèƒ½å¤Ÿæ£€ç´¢åˆ°æ¡Œé¢æ´»åŠ¨

---

### 3ï¸âƒ£ å¯åŠ¨å‰ç«¯å¼€å‘ç¯å¢ƒ â­â­

**ä¸ºä»€ä¹ˆ**ï¼šä¸º UI å¼€å‘åšå‡†å¤‡

**æ€ä¹ˆåš**ï¼š
```bash
cd MineContext-main/frontend
pnpm install
pnpm dev
```

**éªŒè¯**ï¼šå‰ç«¯ç•Œé¢èƒ½å¤Ÿæ‰“å¼€å¹¶è¿æ¥åç«¯

---

## ğŸ“… æ—¶é—´è§„åˆ’å»ºè®®

### æœ¬å‘¨ï¼ˆç¬¬ 1 å‘¨ï¼‰
- [x] MineContext éªŒè¯ï¼ˆå·²å®Œæˆï¼‰
- [ ] Screenpipe å¯åŠ¨ï¼ˆ2-3 å°æ—¶ï¼‰
- [ ] åŒæ­¥è„šæœ¬å®ç°ï¼ˆ2-3 å°æ—¶ï¼‰
- [ ] å‰ç«¯ç¯å¢ƒæ­å»ºï¼ˆ1-2 å°æ—¶ï¼‰

**æ€»è®¡**ï¼š5-8 å°æ—¶

---

### ç¬¬ 2-3 å‘¨ï¼šå‰ç«¯æ ¸å¿ƒåŠŸèƒ½
- [ ] å¿«æ·é”®å”¤èµ·ï¼ˆ1 å¤©ï¼‰
- [ ] æ™ºèƒ½å¯¹è¯ç•Œé¢ï¼ˆ2 å¤©ï¼‰
- [ ] ä¸Šä¸‹æ–‡å±•ç¤ºï¼ˆ1 å¤©ï¼‰
- [ ] è®¾ç½®é¢æ¿ï¼ˆ1 å¤©ï¼‰

**æ€»è®¡**ï¼š10-15 å°æ—¶

---

### ç¬¬ 4-5 å‘¨ï¼šCrewAI é›†æˆ
- [ ] CrewAI å®‰è£…é…ç½®ï¼ˆ0.5 å¤©ï¼‰
- [ ] Weekly Report Crew å®ç°ï¼ˆ2 å¤©ï¼‰
- [ ] Agent è°ƒä¼˜ï¼ˆ1 å¤©ï¼‰
- [ ] æµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ1 å¤©ï¼‰

**æ€»è®¡**ï¼š10-12 å°æ—¶

---

### ç¬¬ 6-8 å‘¨ï¼šMCP å¹³å°
- [ ] MCP æ¶æ„è®¾è®¡ï¼ˆ1 å¤©ï¼‰
- [ ] Notion é€‚é…å™¨ï¼ˆ2 å¤©ï¼‰
- [ ] GitHub é€‚é…å™¨ï¼ˆ2 å¤©ï¼‰
- [ ] é›†æˆæµ‹è¯•ï¼ˆ1 å¤©ï¼‰

**æ€»è®¡**ï¼š15-20 å°æ—¶

---

## ğŸš€ ç«‹å³å¼€å§‹

**ç°åœ¨å°±åš**ï¼ˆ5 åˆ†é’Ÿï¼‰ï¼š
```bash
cd "/Users/ruiwang/Desktop/killer app/screenpipe-main"

# æ£€æŸ¥æ˜¯å¦éœ€è¦ç¼–è¯‘
if [ ! -f "target/release/screenpipe" ]; then
    echo "éœ€è¦ç¼–è¯‘ Screenpipeï¼ˆé¢„è®¡ 15-20 åˆ†é’Ÿï¼‰"
    echo "è¿è¡Œ: cargo build --release"
else
    echo "âœ… Screenpipe å·²ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥å¯åŠ¨"
    echo "è¿è¡Œ: ./target/release/screenpipe"
fi
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **MineDesk PRD v1.6**ï¼šå®Œæ•´äº§å“éœ€æ±‚
- **ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’.md**ï¼šè¯¦ç»†æ“ä½œæŒ‡å—
- **README_START_HERE.md**ï¼šå¿«é€Ÿå…¥é—¨
- **QUICK_REFERENCE.md**ï¼šå‘½ä»¤é€ŸæŸ¥

---

## ğŸ’¡ å…³é”®å†³ç­–ç‚¹

### å†³ç­– 1ï¼šå‰ç«¯æ–¹æ¡ˆé€‰æ‹©
**æ¨è**ï¼šåŸºäº MineContext ç°æœ‰å‰ç«¯ï¼ˆèŠ‚çœ 50% æ—¶é—´ï¼‰

### å†³ç­– 2ï¼šCrewAI vs è‡ªç ” Agent
**æ¨è**ï¼šä½¿ç”¨ CrewAIï¼ˆæˆç†Ÿæ¡†æ¶ï¼Œå¿«é€Ÿä¸Šæ‰‹ï¼‰

### å†³ç­– 3ï¼šå­˜å‚¨åç«¯
**æ¨è**ï¼šSQLiteï¼ˆè½»é‡ã€æœ¬åœ°ä¼˜å…ˆï¼Œæ»¡è¶³å½“å‰éœ€æ±‚ï¼‰

### å†³ç­– 4ï¼šå¼€å‘èŠ‚å¥
**æ¨è**ï¼šå¿«é€Ÿè¿­ä»£ï¼Œè¾¹ç”¨è¾¹ä¼˜åŒ–ï¼ˆ2 å‘¨ä¸€ä¸ªç‰ˆæœ¬ï¼‰

---

## âœ… æˆåŠŸæ ‡å‡†

### M1 å®Œæˆæ ‡å¿—ï¼ˆ2 å‘¨å†…ï¼‰
- [x] MineContext è¿è¡Œç¨³å®š
- [ ] Screenpipe æŒç»­é‡‡é›†æ•°æ®
- [ ] åŒæ­¥é“¾è·¯æ‰“é€š
- [ ] å‰ç«¯åŸºç¡€ç•Œé¢å¯ç”¨

### M2 å®Œæˆæ ‡å¿—ï¼ˆ6 å‘¨å†…ï¼‰
- [ ] æ™ºèƒ½å¯¹è¯ä½“éªŒä¼˜ç§€
- [ ] ä¸Šä¸‹æ–‡æ£€ç´¢å‡†ç¡®
- [ ] UI/UX ç¬¦åˆé¢„æœŸ
- [ ] CrewAI å‘¨æŠ¥ç”Ÿæˆ

### M3 å®Œæˆæ ‡å¿—ï¼ˆ10 å‘¨å†…ï¼‰
- [ ] MCP å¹³å°ä¸Šçº¿
- [ ] Notion/GitHub é›†æˆ
- [ ] éšç§åŠŸèƒ½å®Œå–„
- [ ] æ€§èƒ½è¾¾æ ‡ï¼ˆP50 < 20msï¼‰

---

**ç¥å¼€å‘é¡ºåˆ©ï¼ğŸš€**

æœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶å‚è€ƒæ–‡æ¡£æˆ–æŸ¥çœ‹æ—¥å¿—ã€‚

